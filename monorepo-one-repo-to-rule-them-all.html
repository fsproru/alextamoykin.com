<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Monorepo. One Repo To Rule Them All. - Alex Tamoykin</title>
    <meta name="description" content="Alex Tamoykin - Building world-class software, teams, and products." />
    <meta name="google-site-verification" content="horxITIYTI7rrUZ219n23sjKtiQOm96bz4eOBWqWbIM" />
    <meta name="msvalidate.01" content="4C14E46D36C2AA9FF97482F0DF51F36E" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Alex Tamoykin" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Alex Tamoykin" />
    <meta property="og:description" content="Building world-class software, teams, and products." />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Alex Tamoykin" />
    <meta name="twitter:description" content="Building world-class software, teams, and products." />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Alex Tamoykin",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Building world-class software, teams, and products."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Alex Tamoykin" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/author/fsproru">About</a></li>
        <li class="nav-fables " role="presentation"><a href="/tag/7-days-of-ruby">7 Days of Ruby</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/7-days-of-rails">Rails in 7 Days</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/book">Books</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/monolith2.jpeg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/logo.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-speeches">

        <header class="post-header">
            <h1 class="post-title">Monorepo. One Repo To Rule Them All.</h1>
            <section class="post-meta">
            <!-- <a href='/'>Alex Tamoykin</a> -->
            <time class="post-date" datetime="2018-05-13">13 May 2018</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/software engineering'>Software engineering</a>
                    
                
                
            </section>
        </header>

        <section class="post-content">

            <p>You start having more applications as your system grows. Even if you started with something like a mobile app, you’ll need a backend for it as well as an admin portal (which is usually a website). As engineers, we’re taught to <a href="/serverless-microservices-on-aws-lambda">modularize our software</a>. This article challenges this principal proposing putting all our apps is a single repository for greater efficiency. Keep on reading to learn how.</p>

<h2 id="what-is-a-monorepo">What is a monorepo</h2>
<p>Imagine you have a mobile app, an admin website, and your backend. Traditionally, each one of these apps lives inside its own code repository. On the other hand, you can have all your apps in a single code repository called the monorepo. This way, all apps are located in a single repo that shares the same changelog.</p>

<h2 id="monorepo-advantages">Monorepo Advantages</h2>
<p>As you probably heard <a href="https://cacm.acm.org/magazines/2016/7/204032-why-google-stores-billions-of-lines-of-code-in-a-single-repository/fulltext" target="_blank">Google</a> and <a href="https://code.facebook.com/posts/218678814984400/scaling-mercurial-at-facebook/" target="_blank">Facebook</a> use a monorepo for their projects. There are numerous reasons for it. At the end of the days, it all comes down to efficiency. Managing your code in a single repository is easier than managing it in multiple repositories. Here is an example:</p>

<h3 id="developer-efficiency">1. Developer Efficiency</h3>
<p>If you need to make a change across all three apps in separate repositories, you’ll need to make the following steps:</p>

<ol>
  <li>Make a change in the app.</li>
  <li>Create a pull request to review the app code.</li>
  <li>Make a change on the backend.</li>
  <li>Create a pull request to review your backend code.</li>
  <li>Make a change on the website.</li>
  <li>Create another pull request to review your web code.</li>
  <li>Merge all three.</li>
</ol>

<p>When you have all apps in a single repository, the need for making different pull requests goes away. This way, you make all changes in one pull request, have your code reviewed once and move on.</p>

<h3 id="simplified-versioning">2. Simplified Versioning</h3>
<p>If your apps are all in different code repositories, each app has to have a different version. Maintaining and matching these versions can be tedious. Monorepo solves this problem by simply having all apps in a single repository.</p>

<h3 id="easier-code-sharing">3. Easier Code Sharing</h3>
<p>Monorepo simplifies code sharing which is beneficial to the health of the codebase overall. Shared code is easier to maintain since the change in a shared component propagates to all places that use it. In addition to it, it’s just easier to move things around and extract the code into reusable components in a monorepo. In case of multiple repositories, you need to extract your code into a different repository and create multiple pull requests to use it in separate projects.</p>

<p><img src="/assets/images/corn_sharing.gif" alt="Sharing" async="true" /></p>

<h2 id="how-to-implement-a-monorepo-in-your-project">How to implement a monorepo in your project</h2>
<p>Depending on your technical stack, there are tools out there (like <a href="https://github.com/lerna/lerna" target="_blank">Learna</a> for the Javascript world)
which help you to implement the monorepo structure efficiently. That being said, you don’t have to use these tools if you don’t see fit. It is possible to implement monorepo yourself if it’s the best thing to do. Either way, you’ll need to deal with the following things:</p>

<h3 id="continuous-integration">1. Continuous Integration</h3>
<p>Since all projects are inside a single repository, you now need to determine which project has changed on each code push. If you’re using git, you can see what files are changed with the following command:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span>git diff commitSha1..commitSha2 --name-only</code></pre></figure>

<p>Then you can detect the project name in the diff with the tools like <em>grep</em>. This will help you to determine which project is changed so you can run the build just for this project and/or it’s dependencies. This technique allows you to keep your builds fast instead of re-running all projects on every single change which doesn’t scale well.</p>

<h3 id="deployment">2. Deployment</h3>
<p>Once you determine which project is changed, you can deploy just the projects that changed or the projects that rely on the changed project. Depending on your system, you’ll need to have different jobs dependent on each other. If you use <a href="https://circleci.com/" target="_blank">CircleCI</a>, it supports specifying dependencies between jobs out of the box in the version 2.0 using <a href="https://circleci.com/docs/2.0/workflows/" target="_blank">workflows</a>. Other CI/CD systems have similar capabilities.</p>

<h3 id="documentation">3. Documentation</h3>
<p>Once all your apps are in the same repo, it’s easy to lose track of your documentation. Make sure you maintain the accurate and up to date documentation for each app. It should be crystal clear where the documentation for each app is. This way each developer can get each app up and running quickly and get to implementing features.</p>

<h2 id="final-words">Final words</h2>
<p>Time and time again I realize that you have to always challenge the status quo. Things move quickly, technologies evolve, so as our users. What worked yesterday is not necessarily what works today. Monorepo is one of the examples of it. Challenging the status quo is how we innovate and build better products. So, go ahead, challenge the way you do things, there is always a better way.</p>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/fsproru" style="background-image: url(/assets/images/alex_tamoykin_profile_pic_small.jpg)"><span class="hidden">Alex Tamoykin's Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/fsproru">Alex Tamoykin</a></h4>

                
                    <p> Alex started coding in the 5th grade of elementary school. He is an award winning software engineer and a hands on technical leader with over a decade of industry experience.</p>
                
            </section>

            <!-- /author  -->

            <!-- subscribe -->
            <section class="primary-action">
              <a href="http://eepurl.com/OvBfP" target="_blank"><button>SUBSCRIBE</button></a>

            </section>

            <!-- add Disqus Comments -->
            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/manager.jpg)" href="/do-you-have-to-become-a-manager-to-advance-as-a-software-engineer">
            <section class="post">
                <h2>Do You Have To Become a Manager To Advance As a Software Engineer?</h2>
                <p>The short answer is no. Some people say you have to become a manager in...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/coding.jpeg)" href="/developer-ethics-apply-your-unique-skill-to-make-a-difference">
            <section class="post">
                <h2>Developer Ethics. 5 Ways To Apply Your Unique Skill To Make A Difference</h2>
                <p>As software engineers, we develop products affecting lives of millions of people every single day....</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Alex Tamoykin</a> &copy; 2020</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-45185368-3', 'auto');
            ga('require', 'outboundLinkTracker');
            ga('send', 'pageview');
     </script>
     <script async src="/assets/js/autotrack.js"></script>

</body>
</html>
